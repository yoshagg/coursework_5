# ***Парсинг API HH.***

## ***Структура***

### **src**
Абстрактные классы:
* [AbstractGetApiHh.py](https://github.com/LeeGeller/work_with_API_hh/blob/f2286d1d2ad9d5de5c610d4050818a15e3a6166e/src/parsing_hh.py#L12)
* [AbstractJsonSaver.py](https://github.com/LeeGeller/work_with_API_hh/blob/f2286d1d2ad9d5de5c610d4050818a15e3a6166e/src/parsing_hh.py#L57)
* 
Получаем инфо по API HH:  
* [GetApiHh.py](https://github.com/LeeGeller/work_with_API_hh/blob/f2286d1d2ad9d5de5c610d4050818a15e3a6166e/src/parsing_hh.py#L23)
  
Возможность работать с файлами:
* [JsonSaver.py](https://github.com/LeeGeller/work_with_API_hh/blob/f2286d1d2ad9d5de5c610d4050818a15e3a6166e/src/parsing_hh.py#L68)
* save_file - сохранять
* read_file - читать
* add_vacancy_to_file - добавлять вакансии в файл
* delete_vacancy - удалять вакансии из файла

Создание класса с вакансиями: 
* [Vacancy.py](https://github.com/LeeGeller/work_with_API_hh/blob/f2286d1d2ad9d5de5c610d4050818a15e3a6166e/src/parsing_hh.py#L97)
* clean_vacancy_list - чистит список, полученный при запросе от лишних данных (подготавливает файл к работе)
* get_vacancy_list - создание списка из вакансий (инициализация через class Vacancy)
* __lt__ - сравнивает вакансии

  
Класс DBMabager для работы с базой данных:
* [class DBManager](https://github.com/LeeGeller/work_with_API_hh/blob/f2286d1d2ad9d5de5c610d4050818a15e3a6166e/src/parsing_hh.py#L158C7-L158C16)
* create_data_base - создание базы данных (если уже была создана, то будет пересоздана с потерей данных)
* create_tables - создание двух таблиц (info_vacancies и info_employers), где хранится информация о вакансиях и работодателях
* save_data_to_database - сохранение информации в БД
* get_companies_and_vacancies_count - получает список всех компаний и количество вакансий у каждой компании
* get_all_vacancies - получает список всех вакансий с указанием названия компании, названия вакансии и зарплаты и ссылки на вакансию
* get_avg_salary - получает среднюю зарплату по вакансиям
* get_vacancies_with_higher_salary - получает список всех вакансий, у которых зарплата выше средней по всем вакансиям
* get_vacancies_with_keyword -  получает список всех вакансий, в названии которых содержатся переданные в метод слова, например python

**tests**
* Тесты классов

**main.py**
* Упрощенное взаимодействие с пользователем.

## ***Описание взаимодействия***

* Пользователь указывает название вакансии
* Происходит поиск вакансий по названию
* Из этих вакансий собираются id работодателей
* Получаем инфо о работодателях по их id
* Пользователь вводит название своей БД
* Создается БД и таблицы
* В БД сохраняется вся информация о вакансиях и работодателе
* Пользователь указывает сколько вакансий выводить на экран
* Получаем список всех компаний и количество вакансий у каждой компании
* Получаем список всех вакансий с указанием названия компании, названия вакансии и зарплаты и ссылки на вакансию
* Получаем среднюю зарплату по вакансиям
* Получаем список всех вакансий, у которых зарплата выше средней по всем вакансиям
* Получаем список всех вакансий, в названии которых содержатся переданные в метод слова, например python
